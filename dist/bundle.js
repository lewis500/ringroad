(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Car, Ctrl, S, Traffic, _, angular, colors, d3, visDer;

angular = require('angular');

d3 = require('d3');

_ = require('lodash');

S = {
  num_cars: 200,
  time: 0,
  space: 5,
  pace: .1,
  stopping_time: 4,
  distance: 45,
  beta: .5,
  gamma: 2,
  day: 0,
  advance: function() {
    return this.time++;
  },
  reset_time: function() {
    return this.time = 0;
  }
};

Traffic = (function() {
  function Traffic() {}

  Traffic.prototype.reset = function(waiting) {
    this.waiting = waiting.splice(0);
    this.traveling = [];
    this.memory = [];
    return this.short_memory = [];
  };

  Traffic.prototype.done = function() {
    return this.waiting.length === 0 && this.traveling.length === 0;
  };

  Traffic.prototype.choice_stage = function() {};

  Traffic.prototype.receive = function(car) {
    var g0, loc;
    loc = _.random(0, 360);
    g0 = 0;
    _.forEach(this.traveling, function(c) {
      var g;
      g = c.get_gap();
      if (g >= S.space && g > g0) {
        loc = (c.loc + g / 2) % 360;
        return g0 = g;
      }
    });
    car.enter(loc);
    this.traveling.push(car);
    return this.order_cars();
  };

  Traffic.prototype.update = function() {
    this.waiting.forEach((function(_this) {
      return function(car) {
        if (car.entering(S.time)) {
          _.remove(_this.waiting, car);
          return _this.receive(car);
        }
      };
    })(this));
    this.traveling.forEach((function(_this) {
      return function(car) {
        car.move();
        if (car.exited) {
          return _.remove(_this.traveling, car);
        }
      };
    })(this));
    return this.order_cars();
  };

  Traffic.prototype.remember = function(d) {
    var res;
    this.short_memory.push(d);
    if (this.short_memory.length >= 3) {
      res = {
        f: 0,
        v: 0,
        a: 0
      };
      this.short_memory.forEach(function(d) {
        res.f += d.f / 3;
        res.v += d.v / 3;
        return res.a += d.a / 3;
      });
      this.short_memory = [];
      this.memory.push(res);
      if (this.memory.length > 80) {
        return this.memory.shift();
      }
    }
  };

  Traffic.prototype.order_cars = function() {
    var l, v;
    this.traveling.sort(function(a, b) {
      return a.loc - b.loc;
    });
    v = 0;
    l = this.traveling.length;
    if (l > 1) {
      return this.traveling.forEach(function(car, i, k) {
        if (!car.stopped) {
          v++;
        }
        car.set_next(k[(i + 1) % l]);
        return car.set_prev(k[(i === 0 ? l - 1 : i - 1)]);
      });
    }
  };

  return Traffic;

})();

Car = (function() {
  function Car(distance) {
    this.distance = distance;
    this.id = _.uniqueId();
    this.t_en = _.random(1, 225);
    this.exited = false;
    this.next = {
      loc: 361
    };
  }

  Car.prototype.entering = function(t) {
    return this.t_en < t;
  };

  Car.prototype.set_next = function(next) {
    this.next = next;
  };

  Car.prototype.set_prev = function(prev) {
    this.prev = prev;
  };

  Car.prototype.exit = function() {
    this.t_ex = S.time;
    return this.exited = true;
  };

  Car.prototype.enter = function(loc1) {
    this.loc = loc1;
    this.stopped = 0;
    this.destination = (this.loc + this.distance) % 360;
    return this.color = colors(this.destination);
  };

  Car.prototype.get_gap = function() {
    var gap;
    gap = this.next.loc - this.loc;
    if (gap < 0) {
      return gap + 360;
    } else {
      return gap;
    }
  };

  Car.prototype.eval_costs = function() {
    var sd;
    sd = S.wish_time;
    return this.cost = (this.t_ex - this.t_en) + Math.max;
  };

  Car.prototype.move = function() {
    if (this.stopped > 0) {
      return this.stopped--;
    } else {
      if (this.get_gap() >= S.space) {
        this.loc = (this.loc + 1) % 360;
        if (this.loc === this.destination) {
          return this.exit();
        }
      } else {
        return this.stopped = S.stopping_time;
      }
    }
  };

  return Car;

})();

colors = d3.scale.linear().domain([0, 60, 120, 180, 240]).range(['#F44336', '#E91E63', '#2196F3', '#00BCD4', '#4CAF50']);

Ctrl = (function() {
  function Ctrl(scope, el) {
    this.scope = scope;
    _.assign(this, {
      paused: true,
      physics: true,
      colors: colors,
      traffic: new Traffic,
      pal: _.range(0, 360, 20)
    });
    this.cars = _.range(S.num_cars).map(function(n) {
      return new Car(S.distance);
    });
    this.day_start();
  }

  Ctrl.prototype.rotator = function(car) {
    return "rotate(" + car.loc + ")";
  };

  Ctrl.prototype.tran = function(tran) {
    return tran.transition().duration(S.pace);
  };

  Ctrl.prototype.day_start = function() {
    S.day++;
    S.reset_time();
    this.physics = true;
    this.traffic.reset(this.cars);
    return this.tick();
  };

  Ctrl.prototype.day_end = function() {
    this.physics = false;
    return this.traffic.choice_stage();
  };

  Ctrl.prototype.click = function() {
    if (this.paused) {
      return this.play();
    } else {
      return this.pause();
    }
  };

  Ctrl.prototype.pause = function() {
    return this.paused = true;
  };

  Ctrl.prototype.tick = function() {
    if (!this.physics) {
      return;
    }
    return d3.timer((function(_this) {
      return function() {
        if (_this.traffic.done()) {
          _this.day_end();
          true;
        }
        S.advance();
        _this.traffic.update();
        _this.scope.$evalAsync();
        if (!_this.paused) {
          _this.tick();
        }
        return true;
      };
    })(this), S.pace * 1000);
  };

  Ctrl.prototype.play = function() {
    this.pause();
    d3.timer.flush();
    this.paused = false;
    return this.tick();
  };

  return Ctrl;

})();

visDer = function() {
  var directive;
  return directive = {
    scope: {},
    controllerAs: 'vm',
    templateUrl: './dist/vis.html',
    controller: ['$scope', '$element', Ctrl]
  };
};

angular.module('mainApp', [require('angular-material')]).directive('visDer', visDer).directive('datum', require('./directives/datum')).directive('d3Der', require('./directives/d3Der'));



},{"./directives/d3Der":2,"./directives/datum":3,"angular":undefined,"angular-material":undefined,"d3":undefined,"lodash":undefined}],2:[function(require,module,exports){
var angular, d3, der;

d3 = require('d3');

angular = require('angular');

der = function($parse) {
  var directive;
  return directive = {
    restrict: 'A',
    scope: {
      d3Der: '=',
      tran: '='
    },
    link: function(scope, el, attr) {
      var hasTransitioned, sel, u;
      sel = d3.select(el[0]);
      u = 't-' + Math.random();
      hasTransitioned = false;
      return scope.$watch('d3Der', function(v) {
        if (scope.tran && hasTransitioned) {
          hasTransitioned = true;
          return sel.transition(u).attr(v).call(scope.tran);
        } else {
          hasTransitioned = true;
          return sel.attr(v);
        }
      }, true);
    }
  };
};

module.exports = der;



},{"angular":undefined,"d3":undefined}],3:[function(require,module,exports){
module.exports = function($parse) {
  return function(scope, el, attr) {
    return d3.select(el[0]).datum($parse(attr.datum)(scope));
  };
};



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvbGV3aXMvUmVzZWFyY2gvcmluZ3JvYWQvYXBwL2FwcC5jb2ZmZWUiLCIvVXNlcnMvbGV3aXMvUmVzZWFyY2gvcmluZ3JvYWQvYXBwL2RpcmVjdGl2ZXMvZDNEZXIuY29mZmVlIiwiL1VzZXJzL2xld2lzL1Jlc2VhcmNoL3Jpbmdyb2FkL2FwcC9kaXJlY3RpdmVzL2RhdHVtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLElBQUE7O0FBQUEsT0FBQSxHQUFVLE9BQUEsQ0FBUSxTQUFSOztBQUNWLEVBQUEsR0FBSyxPQUFBLENBQVEsSUFBUjs7QUFDTCxDQUFBLEdBQUksT0FBQSxDQUFRLFFBQVI7O0FBRUosQ0FBQSxHQUNDO0VBQUEsUUFBQSxFQUFVLEdBQVY7RUFDQSxJQUFBLEVBQU0sQ0FETjtFQUVBLEtBQUEsRUFBTyxDQUZQO0VBR0EsSUFBQSxFQUFNLEVBSE47RUFJQSxhQUFBLEVBQWUsQ0FKZjtFQUtBLFFBQUEsRUFBVSxFQUxWO0VBTUEsSUFBQSxFQUFNLEVBTk47RUFPQSxLQUFBLEVBQU8sQ0FQUDtFQVFBLEdBQUEsRUFBSyxDQVJMO0VBU0EsT0FBQSxFQUFTLFNBQUE7V0FDUixJQUFDLENBQUEsSUFBRDtFQURRLENBVFQ7RUFXQSxVQUFBLEVBQVksU0FBQTtXQUNYLElBQUMsQ0FBQSxJQUFELEdBQVE7RUFERyxDQVhaOzs7QUFjSztFQUNRLGlCQUFBLEdBQUE7O29CQUViLEtBQUEsR0FBTSxTQUFDLE9BQUQ7SUFDTCxJQUFDLENBQUEsT0FBRCxHQUFXLE9BQU8sQ0FBQyxNQUFSLENBQWUsQ0FBZjtJQUNYLElBQUMsQ0FBQSxTQUFELEdBQWE7SUFDYixJQUFDLENBQUEsTUFBRCxHQUFVO1dBQ1YsSUFBQyxDQUFBLFlBQUQsR0FBZ0I7RUFKWDs7b0JBTU4sSUFBQSxHQUFNLFNBQUE7V0FDTCxJ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SixDQUFTLENBQVQsRUFQRDs7TUFEQyxDQURILEVBVUcsSUFWSDtJQUpLLENBSk47O0FBRkk7O0FBcUJOLE1BQU0sQ0FBQyxPQUFQLEdBQWlCOzs7OztBQ3hCakIsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBQyxNQUFEO1NBQ2hCLFNBQUMsS0FBRCxFQUFRLEVBQVIsRUFBWSxJQUFaO1dBQ0MsRUFBRSxDQUFDLE1BQUgsQ0FBVSxFQUFHLENBQUEsQ0FBQSxDQUFiLENBQWdCLENBQUMsS0FBakIsQ0FBdUIsTUFBQSxDQUFPLElBQUksQ0FBQyxLQUFaLENBQUEsQ0FBbUIsS0FBbkIsQ0FBdkI7RUFERDtBQURnQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJhbmd1bGFyID0gcmVxdWlyZSAnYW5ndWxhcidcbmQzID0gcmVxdWlyZSAnZDMnXG5fID0gcmVxdWlyZSAnbG9kYXNoJ1xuXG5TID0gXG5cdG51bV9jYXJzOiAyMDBcblx0dGltZTogMFxuXHRzcGFjZTogNVxuXHRwYWNlOiAuMVxuXHRzdG9wcGluZ190aW1lOiA0XG5cdGRpc3RhbmNlOiA0NVxuXHRiZXRhOiAuNVxuXHRnYW1tYTogMlxuXHRkYXk6IDBcblx0YWR2YW5jZTogLT5cblx0XHRAdGltZSsrXG5cdHJlc2V0X3RpbWU6IC0+XG5cdFx0QHRpbWUgPSAwXG5cbmNsYXNzIFRyYWZmaWNcblx0Y29uc3RydWN0b3I6IC0+XG5cblx0cmVzZXQ6KHdhaXRpbmcpLT5cblx0XHRAd2FpdGluZyA9IHdhaXRpbmcuc3BsaWNlIDBcblx0XHRAdHJhdmVsaW5nID0gW11cblx0XHRAbWVtb3J5ID0gW11cblx0XHRAc2hvcnRfbWVtb3J5ID0gW11cblxuXHRkb25lOiAtPlxuXHRcdEB3YWl0aW5nLmxlbmd0aCA9PSAwIGFuZCBAdHJhdmVsaW5nLmxlbmd0aCA9PSAwXG5cblx0Y2hvaWNlX3N0YWdlOiAtPlxuXG5cdHJlY2VpdmU6IChjYXIpLT5cblx0XHRsb2MgPSBfLnJhbmRvbSAwLDM2MFxuXHRcdGcwID0gMFxuXHRcdF8uZm9yRWFjaCBAdHJhdmVsaW5nLCAoYyktPlxuXHRcdFx0ZyA9IGMuZ2V0X2dhcCgpXG5cdFx0XHRpZiBnID49IFMuc3BhY2UgYW5kIGcgPiBnMFxuXHRcdFx0XHRsb2MgPSAoYy5sb2MgKyBnLzIpJTM2MFxuXHRcdFx0XHRnMCA9IGdcblx0XHRjYXIuZW50ZXIgbG9jXG5cdFx0QHRyYXZlbGluZy5wdXNoIGNhclxuXHRcdEBvcmRlcl9jYXJzKClcblxuXHR1cGRhdGU6IC0+XG5cdFx0QHdhaXRpbmcuZm9yRWFjaCAoY2FyKT0+XG5cdFx0XHRpZiBjYXIuZW50ZXJpbmcgUy50aW1lXG5cdFx0XHRcdF8ucmVtb3ZlIEB3YWl0aW5nLCBjYXJcblx0XHRcdFx0QHJlY2VpdmUgY2FyXG5cdFx0QHRyYXZlbGluZy5mb3JFYWNoIChjYXIpPT5cblx0XHRcdGNhci5tb3ZlKClcblx0XHRcdGlmIGNhci5leGl0ZWQgdGhlbiBfLnJlbW92ZSBAdHJhdmVsaW5nLCBjYXJcblx0XHRAb3JkZXJfY2FycygpXG5cblx0cmVtZW1iZXI6IChkKS0+XG5cdFx0QHNob3J0X21lbW9yeS5wdXNoIGRcblx0XHRpZiBAc2hvcnRfbWVtb3J5Lmxlbmd0aCA+PSAzXG5cdFx0XHRyZXMgPSBcblx0XHRcdFx0ZjogMFxuXHRcdFx0XHR2OiAwXG5cdFx0XHRcdGE6IDBcblx0XHRcdEBzaG9ydF9tZW1vcnkuZm9yRWFjaCAoZCktPlxuXHRcdFx0XHRyZXMuZiArPSBkLmYvM1xuXHRcdFx0XHRyZXMudiArPSBkLnYvM1xuXHRcdFx0XHRyZXMuYSArPSBkLmEvM1xuXHRcdFx0QHNob3J0X21lbW9yeSA9IFtdXG5cblx0XHRcdEBtZW1vcnkucHVzaCByZXNcblx0XHRcdGlmIEBtZW1vcnkubGVuZ3RoID4gODAgdGhlbiBAbWVtb3J5LnNoaWZ0KClcblxuXHRvcmRlcl9jYXJzOiAtPlxuXHRcdEB0cmF2ZWxpbmcuc29ydCAoYSxiKS0+IGEubG9jIC0gYi5sb2Ncblx0XHR2ID0gMFxuXHRcdGwgPSBAdHJhdmVsaW5nLmxlbmd0aFxuXHRcdGlmIGwgPiAxXG5cdFx0XHRAdHJhdmVsaW5nLmZvckVhY2ggKGNhcixpLGspLT5cblx0XHRcdFx0aWYgIWNhci5zdG9wcGVkIHRoZW4gdisrXG5cdFx0XHRcdGNhci5zZXRfbmV4dCBrWyhpKzEpJWxdXG5cdFx0XHRcdGNhci5zZXRfcHJldiBrWyhpZiAoaT09MCkgdGhlbiAobC0xKSBlbHNlIChpLTEpKV1cblxuY2xhc3MgQ2FyXG5cdGNvbnN0cnVjdG9yOihAZGlzdGFuY2UpLT5cblx0XHRAaWQgPSBfLnVuaXF1ZUlkKClcblx0XHRAdF9lbiA9IF8ucmFuZG9tIDEsIDIyNVxuXHRcdEBleGl0ZWQgPSBmYWxzZVxuXHRcdEBuZXh0ID0gXG5cdFx0XHRsb2M6IDM2MVxuXG5cdGVudGVyaW5nOiAodCktPiBAdF9lbiA8IHRcblxuXHQjIHNldHRlcnNcblx0c2V0X25leHQ6IChAbmV4dCktPlxuXHRzZXRfcHJldjogKEBwcmV2KS0+XG5cdCMgc2V0X2NvbG9yOiAoQGNvbG9yKS0+XG5cdGV4aXQ6IC0+XG5cdFx0QHRfZXggPSBTLnRpbWVcblx0XHRAZXhpdGVkID0gdHJ1ZVxuXG5cdGVudGVyOihAbG9jKS0+XG5cdFx0QHN0b3BwZWQgPSAwXG5cdFx0QGRlc3RpbmF0aW9uID0gKCBAbG9jICsgQGRpc3RhbmNlICklMzYwXG5cdFx0QGNvbG9yID0gY29sb3JzIEBkZXN0aW5hdGlvblxuXG5cdGdldF9nYXA6LT5cblx0XHRnYXAgPSBAbmV4dC5sb2MgLSBAbG9jXG5cdFx0aWYgZ2FwIDwgMCB0aGVuIChnYXAgKyAzNjApIGVsc2UgZ2FwXG5cblx0ZXZhbF9jb3N0czogLT5cblx0XHRzZCA9IFMud2lzaF90aW1lXG5cdFx0QGNvc3QgPSAoQHRfZXggLSBAdF9lbikgKyBNYXRoLm1heCBcblxuXHRtb3ZlOiAtPlxuXHRcdGlmIEBzdG9wcGVkID4gMFxuXHRcdFx0QHN0b3BwZWQtLVxuXHRcdGVsc2Vcblx0XHRcdGlmIEBnZXRfZ2FwKCkgPj0gUy5zcGFjZVxuXHRcdFx0XHRAbG9jID0gKEBsb2MgKyAxKSUzNjBcblx0XHRcdFx0aWYgKEBsb2MgPT0gQGRlc3RpbmF0aW9uKSB0aGVuIEBleGl0KClcblx0XHRcdGVsc2Vcblx0XHRcdFx0QHN0b3BwZWQgPSBTLnN0b3BwaW5nX3RpbWVcblxuY29sb3JzID0gZDMuc2NhbGUubGluZWFyKClcblx0XHQuZG9tYWluIFswLCA2MCwgMTIwLCAxODAsIDI0MF1cblx0XHQucmFuZ2UgW1xuXHRcdFx0JyNGNDQzMzYnLCAjcmVkXG5cdFx0XHQnI0U5MUU2MycsICNwaW5rXG5cdFx0XHQnIzIxOTZGMycsICNibHVlXG5cdFx0XHQnIzAwQkNENCcsICNjeWFuXG5cdFx0XHQnIzRDQUY1MCcsICNncmVlblxuXHRcdFx0XVxuXG5jbGFzcyBDdHJsXG5cdGNvbnN0cnVjdG9yOihAc2NvcGUsZWwpLT5cblx0XHRfLmFzc2lnbiB0aGlzLFxuXHRcdFx0cGF1c2VkOiB0cnVlXG5cdFx0XHRwaHlzaWNzOiB0cnVlXG5cdFx0XHRjb2xvcnM6IGNvbG9yc1xuXHRcdFx0dHJhZmZpYzogbmV3IFRyYWZmaWNcblx0XHRcdHBhbDogXy5yYW5nZSAwLDM2MCwyMFxuXHRcdEBjYXJzID0gXy5yYW5nZSBTLm51bV9jYXJzXG5cdFx0XHQubWFwIChuKS0+XHRuZXcgQ2FyIFMuZGlzdGFuY2Vcblx0XHRAZGF5X3N0YXJ0KClcblxuXHRyb3RhdG9yOiAoY2FyKS0+IFwicm90YXRlKCN7Y2FyLmxvY30pXCJcblx0dHJhbjogKHRyYW4pLT4gdHJhbi50cmFuc2l0aW9uKCkuZHVyYXRpb24gUy5wYWNlXG5cblx0ZGF5X3N0YXJ0OiAtPlxuXHRcdFMuZGF5Kytcblx0XHRTLnJlc2V0X3RpbWUoKVxuXHRcdEBwaHlzaWNzID0gdHJ1ZSAjcGh5c2ljcyBzdGFnZSBoYXBwZW5pbmdcblx0XHRAdHJhZmZpYy5yZXNldCBAY2Fyc1xuXHRcdEB0aWNrKClcblxuXHRkYXlfZW5kOiAtPlxuXHRcdEBwaHlzaWNzID0gZmFsc2UgI3BoeXNpY3Mgc3RhZ2Ugbm90IGhhcHBlbmluZ1xuXHRcdEB0cmFmZmljLmNob2ljZV9zdGFnZSgpXG5cblx0Y2xpY2s6IC0+IGlmIEBwYXVzZWQgdGhlbiBAcGxheSgpIGVsc2UgQHBhdXNlKClcblx0cGF1c2U6IC0+IEBwYXVzZWQgPSB0cnVlXG5cdHRpY2s6IC0+XG5cdFx0aWYgIUBwaHlzaWNzIHRoZW4gcmV0dXJuXG5cdFx0ZDMudGltZXIgPT5cblx0XHRcdFx0aWYgQHRyYWZmaWMuZG9uZSgpXG5cdFx0XHRcdFx0QGRheV9lbmQoKVxuXHRcdFx0XHRcdHRydWVcblx0XHRcdFx0Uy5hZHZhbmNlKClcblx0XHRcdFx0QHRyYWZmaWMudXBkYXRlKClcblx0XHRcdFx0QHNjb3BlLiRldmFsQXN5bmMoKVxuXHRcdFx0XHRpZiAhQHBhdXNlZCB0aGVuIEB0aWNrKClcblx0XHRcdFx0dHJ1ZVxuXHRcdFx0LCBTLnBhY2UqMTAwMFxuXG5cdHBsYXk6IC0+XG5cdFx0QHBhdXNlKClcblx0XHRkMy50aW1lci5mbHVzaCgpXG5cdFx0QHBhdXNlZCA9IGZhbHNlXG5cdFx0QHRpY2soKVxuXG52aXNEZXIgPSAtPlxuXHRkaXJlY3RpdmUgPSBcblx0XHRzY29wZToge31cblx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHR0ZW1wbGF0ZVVybDogJy4vZGlzdC92aXMuaHRtbCdcblx0XHRjb250cm9sbGVyOiBbJyRzY29wZScsICckZWxlbWVudCcsIEN0cmxdXG5cbmFuZ3VsYXIubW9kdWxlICdtYWluQXBwJyAsIFtyZXF1aXJlICdhbmd1bGFyLW1hdGVyaWFsJ11cblx0LmRpcmVjdGl2ZSAndmlzRGVyJywgdmlzRGVyXG5cdC5kaXJlY3RpdmUgJ2RhdHVtJywgcmVxdWlyZSAnLi9kaXJlY3RpdmVzL2RhdHVtJ1xuXHQuZGlyZWN0aXZlICdkM0RlcicsIHJlcXVpcmUgJy4vZGlyZWN0aXZlcy9kM0RlcidcbiIsImQzID0gcmVxdWlyZSAnZDMnXG5hbmd1bGFyID0gcmVxdWlyZSAnYW5ndWxhcidcblxuZGVyID0gKCRwYXJzZSktPiAjZ29lcyBvbiBhIHN2ZyBlbGVtZW50XG5cdGRpcmVjdGl2ZSA9IFxuXHRcdHJlc3RyaWN0OiAnQSdcblx0XHRzY29wZTogXG5cdFx0XHRkM0RlcjogJz0nXG5cdFx0XHR0cmFuOiAnPSdcblx0XHRsaW5rOiAoc2NvcGUsIGVsLCBhdHRyKS0+XG5cdFx0XHRzZWwgPSBkMy5zZWxlY3QgZWxbMF1cblx0XHRcdHUgPSAndC0nICsgTWF0aC5yYW5kb20oKVxuXHRcdFx0aGFzVHJhbnNpdGlvbmVkID0gZmFsc2Vcblx0XHRcdHNjb3BlLiR3YXRjaCAnZDNEZXInXG5cdFx0XHRcdCwgKHYpLT5cblx0XHRcdFx0XHRpZiBzY29wZS50cmFuIGFuZCBoYXNUcmFuc2l0aW9uZWRcblx0XHRcdFx0XHRcdGhhc1RyYW5zaXRpb25lZCA9IHRydWVcblx0XHRcdFx0XHRcdHNlbC50cmFuc2l0aW9uIHVcblx0XHRcdFx0XHRcdFx0LmF0dHIgdlxuXHRcdFx0XHRcdFx0XHQuY2FsbCBzY29wZS50cmFuXG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0aGFzVHJhbnNpdGlvbmVkID0gdHJ1ZVxuXHRcdFx0XHRcdFx0c2VsLmF0dHIgdlxuXHRcdFx0XHQsIHRydWVcbm1vZHVsZS5leHBvcnRzID0gZGVyIiwibW9kdWxlLmV4cG9ydHMgPSAoJHBhcnNlKS0+XG5cdChzY29wZSwgZWwsIGF0dHIpLT5cblx0XHRkMy5zZWxlY3QoZWxbMF0pLmRhdHVtICRwYXJzZShhdHRyLmRhdHVtKShzY29wZSkiXX0=
